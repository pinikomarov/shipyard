# shellcheck shell=bash
# shellcheck source=scripts/shared/lib/source_only
. "${BASH_SOURCE%/*}"/source_only

### Functions ###

function install_helm() {
    if kubectl -n kube-system rollout status deploy/tiller-deploy --timeout=3s > /dev/null 2>&1; then
        echo "Helm already installed, skipping helm installation..."
        return
    fi

    echo "Installing helm..."
    kubectl -n kube-system create serviceaccount tiller
    kubectl create clusterrolebinding tiller --clusterrole=cluster-admin --serviceaccount=kube-system:tiller
    helm --kube-context "${cluster}" init --service-account tiller
    kubectl -n kube-system rollout status deploy/tiller-deploy --timeout=30s
}
